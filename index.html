<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>14</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Pixelify+Sans&display=swap" rel="stylesheet">

<style>
body {
  font-family: 'Pixelify Sans', sans-serif;
  background: url("bg1.png") center/cover no-repeat;
  color: #F5EFFF;
  height: 100vh;
  margin: 0;
  overflow: hidden;
}

#bg-slide {
  position: fixed;
  top: 0;
  left: 100%;
  width: 100%;
  height: 100%;
  background: url("bg2.png") center/cover no-repeat;
  transition: left 1.2s ease-in-out;
  z-index: 0;
}

.sprite-container {
  position: relative; /* so it moves with the flex centering */
  top: 0; /* remove that -150px */
  left: 50%;
  transform: translateX(-50%) scale(1);
  transition: transform 3s linear;
  z-index: 1;
}

/* Center just the start screen */
#start-container {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  height: 100vh;
  position: relative;
  z-index: 2;
}

/* Keep #ui just for dialogue card at bottom */
#ui {
  position: relative;
  z-index: 2;
}

/* dialogue card at bottom */
.card {
  position: absolute;  /* absolute works here */
  bottom: 30px;        /* fixed distance from bottom */
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0, 0, 0, 0.35);
  padding: 30px;
  border-radius: 15px;
  border: 5px solid white;
  text-align: center;
  width: 1250px;
  display: none;
  cursor: pointer;
  margin: 0;
  z-index: 10;
}


#bg-slide.active {
  left: 0;
}

/* UI fade */
.fade-out {
  opacity: 0;
  transition: opacity 0.5s ease;
}



  /* light theme when bg turns pink */
.ui-light {
  color: #1E1B2E;
}

.ui-light .card {
  background: #FF69B4;
  border-color: #1E1B2E;
}

.ui-light .card h1 {
  color: #1E1B2E;
}

.ui-light .card button {
  background: #1E1B2E;
  color: #FF69B4;
}

button {
  font-family: 'Pixelify Sans', sans-serif;
  margin-top: 15px;
  padding: 10px 18px;
  border-radius: 10px;
  background: white;
  color: #1E1B2E;
  cursor: pointer;
}

.card button:hover {
  transform: scale(1.1);
  }
  
.start-screen {
  background: none;
  border: none;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  cursor: pointer;
  text-align: center;
  color: #F5EFFF;
}

.part-title {
  font-size: 64px;
  margin: 0;
}

.start-text {
  font-size: 28px;
  margin-top: 20px;
  opacity: 0.8;
  transition: transform 0.2s, opacity 0.2s;
}

.start-screen:hover .start-text {
  transform: scale(1.1);
  opacity: 1;
}
  
/* panda */
.sprite-container {
  position: absolute;
  top: -150px;
  left: 50%;
  transform: translate(-50%, 0) scale(1);
  transition: transform 3s linear;
}
.sprite {
  width: 96px;
  height: 96px;
}

.sprite-container.fall {
  animation: fallDown 0.5s ease-out forwards;
}
@keyframes fallDown {
  to { top: 50%; opacity: 1; }
}

.pop {
  animation: popUp 0.4s ease-out forwards;
}
@keyframes popUp {
  to { opacity: 1; }
}

#choices {
  display: flex;
  justify-content: center;
  gap: 25px;
  margin-top: 20px;
}

#final-screen {
  position: absolute;
  top: 15%;
  width: 100%;
  text-align: center;
  z-index: 5;
}

#final-text {
  font-size: 64px;
  margin-bottom: 60px;
}

#final-buttons {
  position: fixed;
  bottom: 60px;
  width: 100%;
  display: flex;
  justify-content: space-between;
  padding: 0 220px; /* ‚¨ÖÔ∏è bigger buffer */
}

#yesBtn {
  width: 220px;
  height: 90px;
  font-size: 32px;
  transition: transform 0.2s ease;
}

#noBtn {
  position: fixed;
  right: 220px;
  bottom: 60px;

  width: 220px;
  height: 90px;

  font-size: 32px;
  padding: 0;

  transform: none !important;
  transition: none !important;

  pointer-events: auto;
}

#noBtn:hover {
  transform: none;
}

/* YES SCREEN */
.yes-screen {
  background: url("yes.png") center/cover no-repeat;
}

</style>
</head>

<body>

<div id="bg-slide"></div>

<div id="ui">
  <div id="start-container">
  <button class="start-screen" id="startBtn">
    <h1 class="part-title">Part 1: Just A Question</h1>
    <p class="start-text">START</p>
  </button>  
</div>


  <div class="card" id="card">
    <h1 id="dialogue"></h1>
    <div id="choices" style="display:none;">
      <button id="choice1">amazing yass</button>
      <button id="choice2">ehhhh</button>
    </div>
  </div>
</div>

<div class="sprite-container" id="spriteContainer">
  <img id="sprite" class="sprite" src="start.png">
</div>

<div id="final-screen" style="display:none;">
  <h1 id="final-text">Will you be my Valentine?</h1>
  <div id="final-buttons">
  <button id="yesBtn">YES</button>
</div>

<button id="noBtn">NO</button>
</div>

<script>
const startBtn = document.getElementById("startBtn");
const sprite = document.getElementById("sprite");
const container = document.getElementById("spriteContainer");
const card = document.getElementById("card");
const dialogueEl = document.getElementById("dialogue");
const choicesEl = document.getElementById("choices");
const choice1 = document.getElementById("choice1");
const choice2 = document.getElementById("choice2");
const finalScreen = document.getElementById("final-screen");
const yesBtn = document.getElementById("yesBtn");
const noBtn = document.getElementById("noBtn");

const speed = 40;

// --- Dialogue sequences ---
const firstDialogue = ["HELLOOOO BACOOOO HAHAHAHA", "whats upp hows your day"];

const sharedDialogue = [
  "so like",
  "ik youre probably wondering, 'pauline what the hell is this'",
  "and to that i reply... tbh im not really sure myself, i was bored",
  "but ig just let me be cheesy and nerdy for a sec by coding this whole thing HAHAHAHA"
];

const postFirstDialogues = [
  "anyway so ik that pretty much in our whole relationship",
  "youve been the one spoiling me with gifts",
  "...and flowers...",
  "...and letters...",
  "and you didnt even let me pay for that one lunch LORDD",
  "so im spoiled i love it but also i hate it HAHAHA let me have this chance to fix that",
  "February 14, maybe around 12-6?",
  "you and me duh (edit: just found out abt that benj thing and i hate that man)",
  "Megamall (cause thats the easiest to go to for both of us and we never got to go pa)",
  "i will plan what to do, where to eat (dw i'll leave out some time for us to do whatever unplanned stuff cause you love doing that)",
  "IM PAYING for anything and everything there is the need to pay",
  "and yeah just whatever you wanna do for that day im g fr",
  "so yes i was bored and wanted to... formally? officially? (idk) ask you",
  "...just a question..."
];

// --- State variables ---
let dialogues = [];
let dialogueIndex = 0;
let charIndex = 0;
let isTyping = false;
let waitingForInput = false;
let currentDialogueSet = "firstDialogue"; // track which set is active

// --- Helper functions ---
function startTalking() { sprite.src = "talk.gif"; }
function stopTalking() { sprite.src = "neutral_scaled.png"; }

function typeDialogue() {
  isTyping = true;
  waitingForInput = false;
  dialogueEl.textContent = "";
  startTalking();

  function typeChar() {
    if (charIndex < dialogues[dialogueIndex].length) {
      dialogueEl.textContent += dialogues[dialogueIndex][charIndex++];
      setTimeout(typeChar, speed);
    } else {
      isTyping = false;
      waitingForInput = true;
      stopTalking();
    }
  }
  typeChar();
}

function nextDialogue() {
  if (!waitingForInput) return;
  waitingForInput = false;
  charIndex = 0;
  dialogueIndex++;

  // Check if we're at the end of current dialogue set
  if (dialogueIndex < dialogues.length) {
    typeDialogue();
  } else {
    if (currentDialogueSet === "firstDialogue") {
      // Show choice buttons **after the last line of firstDialogue**
      choicesEl.style.display = "flex";
    } else {
      // Finished everything ‚Üí show final screen
      card.style.display = "none";
      finalScreen.style.display = "block";
    }
  }
}

function startNewDialogue(newDialogues, setName) {
  dialogues = newDialogues;
  dialogueIndex = 0;
  charIndex = 0;
  currentDialogueSet = setName;
  choicesEl.style.display = "none";
  card.style.display = "block";
  typeDialogue();
}

// --- Choices handlers ---
choice1.onclick = () => {
  // "Amazing yass" path
  const amazingDialogue = [
  "AS IT SHOULD BEüò§",
  "but okay hopefully this dont ruin it for you HELPP"
];
startNewDialogue(
    amazingDialogue.concat(sharedDialogue, postFirstDialogues),
    "postDialogue"
  );
};

choice2.onclick = () => {
  // "Ehhhh" path
  const ehDialogue = [
    "...well damn i was hoping you dont press that",
    "hayss okay you can yap abt that to me later if you havent already",
    "anywayy, hopefully this makes you feel better??"
  ];
  startNewDialogue(ehDialogue.concat(sharedDialogue, postFirstDialogues), "postDialogue");
};

// --- Card click / spacebar advance ---
card.onclick = () => { if (!isTyping) nextDialogue(); };
document.onkeydown = e => { if (e.code === "Space" && !isTyping) nextDialogue(); };

// --- Start button animation ---
startBtn.onclick = () => {
  startBtn.style.display = "none";

  setTimeout(() => container.classList.add("fall"), 500);
  setTimeout(() => sprite.src = "land.gif", 900);
  setTimeout(() => sprite.src = "look.png", 2000);
  setTimeout(() => sprite.src = "wake.gif", 3000);
  setTimeout(() => sprite.src = "pop.gif", 6000);
  setTimeout(() => sprite.src = "neutral.png", 6500);
  setTimeout(() => {
    sprite.src = "walk.gif";
    container.style.transform = "translate(-50%, 20%) scale(1.5)";
  }, 7000);
  setTimeout(() => sprite.src = "neutral_scaled.png", 10000);

  setTimeout(() => startNewDialogue(firstDialogue, "firstDialogue"), 11000);
};

// --- Final screen YES/NO fun ---
if (noBtn && yesBtn) {
  noBtn.addEventListener("mouseenter", () => {
  const margin = 180;
  const btnWidth = noBtn.offsetWidth;
  const btnHeight = noBtn.offsetHeight;

  const maxX = window.innerWidth - btnWidth - margin;
  const maxY = window.innerHeight - btnHeight - margin;

  const x = Math.random() * maxX;
  const y = Math.random() * maxY;

  noBtn.style.left = x + "px";
  noBtn.style.top = y + "px";
});


  document.addEventListener("mousemove", (e) => {
    const noRect = noBtn.getBoundingClientRect();
    const dx = e.clientX - (noRect.left + noRect.width / 2);
    const dy = e.clientY - (noRect.top + noRect.height / 2);
    const distance = Math.sqrt(dx*dx + dy*dy);

    yesBtn.style.transform = distance < 150 ? "scale(1.3)" : "scale(1)";
  });
  
  yesBtn.onclick = () => {
  // remove everything
  document.getElementById("ui").style.display = "none";
  document.getElementById("bg-slide").style.display = "none";
  document.getElementById("spriteContainer").style.display = "none";
  document.getElementById("final-screen").style.display = "none";
  noBtn.style.display = "none";

  // change background to YES image
  document.body.classList.add("yes-screen");
};
}
</script>

</body>
</html>
